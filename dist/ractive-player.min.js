/*!
 * MIT License
 * 
 * Copyright (c) Yuri Sulyma
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
var RactivePlayer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=React},function(e,t,n){"use strict";var r,s="object"==typeof Reflect?Reflect:null,o=s&&"function"==typeof s.apply?s.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var s,o,i,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(s=l(e))>0&&i.length>s&&!i.warned){i.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=i.length,a=c,console&&console.warn&&console.warn(a)}return e}function h(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function m(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=h.bind(r);return s.listener=n,r.wrapFn=s,s}function p(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):f(s,s.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,u=f(c,l);for(n=0;n<l;++n)o(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,m(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,m(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,s,o,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,s=o;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(s=o[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"awaitMediaCanPlay",function(){return p}),n.d(r,"awaitMediaCanPlayThrough",function(){return d});var s={};n.r(s),n.d(s,"bind",function(){return f}),n.d(s,"wait",function(){return y}),n.d(s,"waitFor",function(){return v}),n.d(s,"range",function(){return b}),n.d(s,"constrain",function(){return g}),n.d(s,"between",function(){return E});var o={};n.r(o),n.d(o,"parseTime",function(){return k}),n.d(o,"formatTime",function(){return w}),n.d(o,"formatTimeMs",function(){return x});var i={};n.r(i),n.d(i,"anyHover",function(){return D}),n.d(i,"onClick",function(){return A});var a={};n.r(a),n.d(a,"dragHelper",function(){return X}),n.d(a,"dragHelperReact",function(){return H});var c={};n.r(c),n.d(c,"animate",function(){return ce}),n.d(c,"replay",function(){return le}),n.d(c,"easings",function(){return ue});var l={};n.r(l),n.d(l,"recursiveMap",function(){return me});var u={};n.r(u),n.d(u,"showIf",function(){return ye}),n.d(u,"during",function(){return ve}),n.d(u,"from",function(){return be});var h={};n.r(h),n.d(h,"animation",function(){return c}),n.d(h,"authoring",function(){return u}),n.d(h,"interactivity",function(){return a}),n.d(h,"media",function(){return r}),n.d(h,"misc",function(){return s}),n.d(h,"mobile",function(){return i}),n.d(h,"react",function(){return l}),n.d(h,"time",function(){return o});var m=n(0);function p(e){return new Promise(t=>{if(e.readyState===e.HAVE_FUTURE_DATA)return t();e.addEventListener("canplay",()=>t())})}function d(e){return new Promise(t=>{if(e.readyState===e.HAVE_ENOUGH_DATA)return t();e.addEventListener("canplaythrough",()=>t())})}function f(e,t){for(const n of t)e[n]=e[n].bind(e)}function y(e){return new Promise(t=>{setTimeout(t,e)})}function v(e,t=10){return new Promise(n=>{const r=()=>{e()?n():setTimeout(r,t)};r()})}function b(e){return new Array(e).fill(null).map((e,t)=>t)}function g(e,t,n){return Math.min(n,Math.max(e,t))}function E(e,t,n){return e<=t&&t<n}function k(e){const[t,n,r,s]=e.match(/^(?:(?:(\d+):)?(\d+):)?(\d+)(?:\.(\d+))?$/).slice(1).map(e=>e||"0"),[o,i,a,c]=[t,n,r,s.padEnd(3,"0")].map(e=>parseInt(e,10));return c+1e3*(a+60*(i+60*o))}function w(e){return`${Math.floor(e/60/1e3)}:${Math.floor(e/1e3%60).toString().padStart(2,"0")}`}function x(e){const t=Math.floor(e%1e3);return`${Math.floor(e/60/1e3)}:${Math.floor(e/1e3%60).toString().padStart(2,"0")}.${t}`}var O=n(1);const _=e=>e,T=["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"].map(e=>document[e]).concat(!1).find(e=>void 0!==e),C=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].map(e=>document.body[e]).concat(()=>{}).find(_).bind(document.body),M=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].map(e=>document[e]).concat(async()=>{}).find(_).bind(document),P=()=>["fullscreen","webkitIsFullScreen","mozFullScreen"].map(e=>document[e]).find(e=>void 0!==e);const j=m.createContext(null);let S=!1;const L=[],N=T?C:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!0},location.origin),!S){S=!0;for(const e of L)e()}},R=T?M:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!1},location.origin),S){S=!1;for(const e of L)e()}},F=T?P:()=>S,I=T?function(e){for(const t of["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"])document.addEventListener(t,e)}:e=>{L.push(e)},D=window.matchMedia("(any-hover: hover)").matches,A=e=>{if(D)return{onClick:e};{let t,n;return{onTouchStart:e=>{t||(n=e.currentTarget,t=e.changedTouches[0].identifier)},onTouchEnd:r=>{if(t)for(const s of Array.from(r.changedTouches))s.identifier===t&&(n.contains(document.elementFromPoint(s.clientX,s.clientY))&&e(r),t=null)}}}};function B(){const[e,t]=Object(m.useState)(F());Object(m.useEffect)(()=>{I(()=>t(F()))});const n=Object(m.useMemo)(()=>A(()=>{F()?R():N()}),[]);return m.createElement("svg",Object.assign({className:"rp-controls-fullscreen"},n,{viewBox:"0 0 36 36"}),e?m.createElement(m.Fragment,null,m.createElement("path",{fill:"white",d:"M 14 14 h -4 v 2 h 6 v -6 h -2 v 4 z"}),m.createElement("path",{fill:"white",d:"M 22 14 v -4 h -2 v 6 h 6 v -2 h -4 z"}),m.createElement("path",{fill:"white",d:"M 20 26 h 2 v -4 h 4 v -2 h -6 v 6 z"}),m.createElement("path",{fill:"white",d:"M 10 22 h 4 v 4 h 2 v -6 h -6 v 2 z"})):m.createElement(m.Fragment,null,m.createElement("path",{fill:"white",d:"M 10 16 h 2 v -4 h 4 v -2 h -6 v 6 z"}),m.createElement("path",{fill:"white",d:"M 20 10 v 2 h 4 v 4 h 2 v -6 h -6 z"}),m.createElement("path",{fill:"white",d:"M 24 24 h -4 v 2 h 6 v -6 h -2 v 4 z"}),m.createElement("path",{fill:"white",d:"M 12 20 h -2 v 6 h 6 v -2 h -4 v -4 z"})))}var z=n(2);class $ extends m.PureComponent{constructor(e){super(e),f(this,["closeDialog","openDialog"]),this.state={dialogOpen:!1}}closeDialog(){this.setState({dialogOpen:!1})}openDialog(){this.setState({dialogOpen:!0})}toggleDialog(){this.setState({dialogOpen:!this.state.dialogOpen})}render(){const e={display:this.state.dialogOpen?"block":"none"};return m.createElement(m.Fragment,null,m.createElement(U,{style:e,closeDialog:this.closeDialog,openDialog:this.openDialog}),m.createElement("svg",{className:"rp-controls-help",onClick:this.openDialog,viewBox:"0 0 20 20"},m.createElement("path",{d:"m 10.896484,3.8652344 c -1.2309996,0 -1.7499996,0.8536094 -1.7499996,1.4746094 -0.026,0.737 0.39525,1.1816406 1.2812496,1.1816406 1.059,0 1.679688,-0.7171875 1.679688,-1.4921875 0,-0.621 -0.274938,-1.1640625 -1.210938,-1.1640625 z",fill:"#FFF",stroke:"none"}),m.createElement("path",{d:"m 10.847656,8.0332031 c -0.765,0 -2.5524216,0.7615469 -4.1074216,2.0605469 l 0.3183594,0.523438 c 0.49,-0.33 1.3207187,-0.664063 1.5117187,-0.664063 0.148,0 0.127,0.193734 0,0.677734 L 7.8378906,13.65625 c -0.447,1.705 0.020156,2.09375 0.6601563,2.09375 0.639,0 2.2877811,-0.58175 3.8007811,-2.09375 L 11.9375,13.169922 c -0.618,0.487 -1.247453,0.71875 -1.439453,0.71875 -0.149,0 -0.2115,-0.19386 -0.0625,-0.75586 l 0.839844,-3.179687 c 0.319,-1.164 0.212265,-1.9199219 -0.427735,-1.9199219 z",fill:"#FFF",stroke:"none"})))}}class U extends m.PureComponent{render(){const e=[["j","Go back 10 seconds"],["<Left>","Go back 5 seconds"],[()=>m.createElement("tr",{key:"space"},m.createElement("th",{scope:"row"},m.createElement("kbd",null,"k")," or ",m.createElement("kbd",null,"<Space>")),m.createElement("td",null,"Play/pause"))],["<Right>","Go forward 5 seconds"],["l","Go forward 10 seconds"],[()=>m.createElement("tr",{key:"number"},m.createElement("th",{scope:"row"},m.createElement("kbd",null,"<0>")," – ",m.createElement("kbd",null,"<9>")),m.createElement("td",null,"Skip to 10",m.createElement("var",null,"n"),"% of the way through the video"))],["f","Full screen"],["<Up>","Increase volume 5%"],["<Down>","Decrease volume 5%"],["m","Mute/unmute"],["?","Show help"]];return z.createPortal(m.createElement("div",{className:"rp-help-dialog",style:this.props.style},m.createElement("button",{onClick:this.props.closeDialog},"×"),m.createElement("div",{className:"rp-help-tables"},m.createElement("table",null,m.createElement("caption",null,"Video controls"),m.createElement("tbody",null,e.map(([e,t])=>"function"==typeof e?e():m.createElement("tr",{key:e},m.createElement("th",{scope:"row"},m.createElement("kbd",null,e)),m.createElement("td",null,t))))),m.createElement("table",null,m.createElement("caption",null,"3D controls"),m.createElement("tbody",null,[["Left mouse","Orbit"],["Scroll wheel","Zoom"],["Right mouse","Pan"]].map(([e,t])=>m.createElement("tr",{key:e},m.createElement("th",{scope:"row"},m.createElement("kbd",null,e)),m.createElement("td",null,t))))))),document.body)}}function V(){const{playback:e}=Object(m.useContext)(ne.Context),[t,n]=Object(m.useState)(e.paused||e.seeking);Object(m.useEffect)(()=>{const t=()=>n(e.paused||e.seeking),r=["pause","play","seeked","seeking","seeked","stop"];for(const n of r)e.hub.on(n,t);return()=>{for(const n of r)e.hub.off(n,t)}},[]);const r=Object(m.useRef)(),s=Object(m.useMemo)(()=>A(()=>e.paused?e.play():e.pause()),[]);return m.createElement("svg",Object.assign({className:"rp-controls-playpause",viewBox:"0 0 36 36",ref:r},s),t?m.createElement("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"white"}):m.createElement("path",{d:"M 12 26 h 4 v -16 h -4 z M 21 26 h 4 v -16 h -4 z",fill:"white"}))}function K(e){const t=Object(m.useContext)(ne.Context),{playback:n}=t,{cols:r,rows:s,frequency:o,path:i,progress:a,show:c,title:l,height:u,width:h}=e,p=r*s;Object(m.useEffect)(()=>{const e=Math.floor(n.duration/o/1e3),r=Math.floor(e/p);t.hub.on("canplay",()=>{for(let e=0;e<=r;++e){(new Image).src=i.replace("%s",e.toString())}})},[]);const d=a*n.duration/1e3,f=Math.floor(d/o),y=Math.floor(f/p),v=f%p,b=Math.floor(v/s),g=v%s,E=i.replace("%s",y.toString());return m.createElement("div",{className:"rp-controls-thumbnail",style:{display:c?"block":"none",left:`calc(${100*a}%)`}},l&&m.createElement("span",{className:"rp-thumbnail-title"},l),m.createElement("div",{className:"rp-thumbnail-box"},m.createElement("img",{src:E,style:{left:`-${g*h}px`,top:`-${b*u}px`}}),m.createElement("span",{className:"rp-thumbnail-time"},w(1e3*d))))}function X(e,t=(()=>{}),n=(()=>{})){return r=>{if(r instanceof MouseEvent||function(e){return"nativeEvent"in e&&e.nativeEvent instanceof MouseEvent}(r)){if(0!==r.button)return;let s=r.clientX,o=r.clientY;const i=e=>{const t=e.clientX-s,r=e.clientY-o;return document.body.removeEventListener("mousemove",a),window.removeEventListener("mouseup",i),n(e,{x:e.clientX,y:e.clientY,dx:t,dy:r})},a=t=>{const n=t.clientX-s,r=t.clientY-o;return s=t.clientX,o=t.clientY,e(t,{x:t.clientX,y:t.clientY,dx:n,dy:r})};return document.body.addEventListener("mousemove",a,!1),window.addEventListener("mouseup",i,!1),t(r,{x:s,y:o},i,a)}{r.preventDefault();const s=r.changedTouches,o=s[0].identifier;let i=s[0].clientX,a=s[0].clientY;const c=e=>{e.preventDefault();for(const t of Array.from(e.changedTouches)){if(t.identifier!==o)continue;const r=t.clientX-i,s=t.clientY-a;return window.removeEventListener("touchend",l),window.removeEventListener("touchcancel",c),window.removeEventListener("touchmove",l),n(e,{x:t.clientX,y:t.clientY,dx:r,dy:s})}},l=t=>{t.preventDefault();for(const n of Array.from(t.changedTouches)){if(n.identifier!==o)continue;const r=n.clientX-i,s=n.clientY-a;return i=n.clientX,a=n.clientY,e(t,{x:n.clientX,y:n.clientY,dx:r,dy:s})}};return window.addEventListener("touchend",c,{capture:!1,passive:!1}),window.addEventListener("touchcancel",c,{capture:!1,passive:!1}),window.addEventListener("touchmove",l,{capture:!1,passive:!1}),t(r,{x:i,y:a},c,l)}}}function H(e,t,n){const r=X(e,t,n);return{onMouseDown:r,onMouseUp:ne.preventCanvasClick,onTouchStart:r}}function Y(e){const{playback:t}=Object(m.useContext)(ne.Context),[n,r]=Object(m.useState)({scrubber:t.currentTime/t.duration,thumb:t.currentTime/t.duration}),[s,o]=Object(m.useState)(!1),i=Object(m.useRef)();Object(m.useEffect)(()=>{t.hub.on("seek",()=>{if(t.seeking)return;const e=t.currentTime/t.duration;r({scrubber:e,thumb:e})}),t.hub.on("seeked",()=>{const e=t.currentTime/t.duration;r(t=>({scrubber:e,thumb:t.thumb}))}),t.hub.on("timeupdate",()=>{const e=t.currentTime/t.duration;r(t=>({scrubber:e,thumb:t.thumb}))})},[]);const a=Object(m.useMemo)(()=>D?{onMouseDown:X((e,{x:n})=>{const s=i.current.getBoundingClientRect(),o=g(0,(n-s.left)/s.width,1);r({scrubber:o,thumb:o}),t.seek(o*t.duration)},e=>{t.seeking=!0;const n=i.current.getBoundingClientRect(),s=g(0,(e.clientX-n.left)/n.width,1);r({scrubber:s,thumb:s}),t.seek(s*t.duration)},()=>t.seeking=!1)}:{},[]),c=Object(m.useMemo)(()=>D?{onMouseOver:()=>o(!0),onMouseMove:e=>{const t=i.current.getBoundingClientRect(),n=g(0,(e.clientX-t.left)/t.width,1);r(e=>({scrubber:e.scrubber,thumb:n}))},onMouseOut:()=>o(!1)}:[],[]),l=Object(m.useMemo)(()=>D?{}:{onTouchStart:X((e,{x:t})=>{const n=i.current.getBoundingClientRect(),s=g(0,(t-n.left)/n.width,1);r({scrubber:s,thumb:s})},e=>{e.preventDefault(),e.stopPropagation(),t.seeking=!0,o(!0)},(e,{x:n})=>{e.preventDefault();const r=i.current.getBoundingClientRect(),s=g(0,(n-r.left)/r.width,1);o(!1),t.seeking=!1,t.seek(s*t.duration)})},[]),u=e.thumbs&&e.thumbs.highlights||[],h=u.find(e=>E(e.time/t.duration,n.thumb,e.time/t.duration+.01)),p=h?h.title:null;return m.createElement("div",Object.assign({className:"rp-controls-scrub",ref:i},a),e.thumbs&&m.createElement(K,Object.assign({},e.thumbs,{progress:n.thumb,show:s,title:p})),m.createElement("div",Object.assign({className:"rp-controls-scrub-wrap"},c),m.createElement("svg",{className:"rp-controls-scrub-progress",preserveAspectRatio:"none",viewBox:"0 0 100 10"},m.createElement("rect",{className:"rp-progress-elapsed",x:"0",y:"0",height:"10",width:100*n.scrubber}),m.createElement("rect",{className:"rp-progress-remaining",x:100*n.scrubber,y:"0",height:"10",width:100*(1-n.scrubber)}),u.map(({time:e})=>m.createElement("rect",{key:e,className:["rp-thumb-highlight"].concat(e<=t.currentTime?"past":[]).join(" "),x:e/t.duration*100,y:"0",width:"1",height:"10"}))),m.createElement("svg",Object.assign({className:"rp-scrubber",style:{left:`calc(${100*n.scrubber}% - 6px)`},viewBox:"0 0 100 100"},l),m.createElement("circle",{cx:"50",cy:"50",r:"50",stroke:"none"}))))}const Q=[.25,.5,.75,1,1.25,1.5,2];function q(){const e=Object(m.useContext)(ne.Context),{playback:t}=e,[n,r]=Object(m.useState)({main:!1,speed:!1}),[s,o]=Object(m.useState)(t.playbackRate);Object(m.useEffect)(()=>{t.hub.on("ratechange",()=>o(t.playbackRate)),e.hub.on("canvasClick",()=>r({main:!1,speed:!1}))});const i=Object(m.useMemo)(()=>{const e={};for(const n of Q)e[n]=A(()=>{t.playbackRate=n,r({main:!0,speed:!1})});return e},[]),a=Object(m.useMemo)(()=>A(()=>r(e=>({main:!(e.main||e.speed),speed:!1}))),[]),c=A(()=>r({main:!0,speed:!1})),l=A(()=>r({speed:!0,main:!1})),u={display:n.main?"block":"none"},h={display:n.speed?"block":"none"};return m.createElement("div",{className:"rp-controls-settings"},m.createElement("div",{className:"rp-settings-speed-dialog",style:h},m.createElement("span",Object.assign({className:"rp-dialog-subtitle"},c),"< Speed"),m.createElement("ul",null,Q.map(e=>m.createElement("li",Object.assign({className:e===s?"selected":"",key:e},i[e]),1===e?"Normal":e.toString())))),m.createElement("div",{className:"rp-settings-dialog",style:u},m.createElement("table",null,m.createElement("tbody",null,m.createElement("tr",Object.assign({},l),m.createElement("th",{scope:"row"},"Speed"),m.createElement("td",null,1===s?"Normal":s," >"))))),m.createElement("svg",Object.assign({},a,{viewBox:"0 0 48 48"}),m.createElement("path",{fill:"#FFF",d:"m24.04 0.14285c-1.376 0-2.7263 0.12375-4.0386 0.34741l-0.64 6.7853c-1.3572 0.37831-2.6417 0.90728-3.8432 1.585l-5.244-4.3317c-2.2152 1.5679-4.1541 3.4955-5.7217 5.7101l4.3426 5.2437c-0.67695 1.2001-1.2177 2.4878-1.5959 3.8432l-6.7745 0.64053c-0.22379 1.3127-0.34741 2.6622-0.34741 4.0386 0 1.3788 0.12285 2.7238 0.34741 4.0386l6.7745 0.64056c0.37825 1.3554 0.91896 2.6431 1.5959 3.8432l-4.3317 5.2437c1.5648 2.2089 3.4908 4.1457 5.6997 5.7105l5.2545-4.3426c1.2023 0.67835 2.485 1.2174 3.8432 1.5959l0.64053 6.7853c1.3123 0.22368 2.6626 0.33658 4.0386 0.33658s2.7155-0.11289 4.0278-0.33658l0.64053-6.7853c1.3582-0.37847 2.6409-0.91755 3.8432-1.5959l5.2545 4.3426c2.2088-1.5649 4.1348-3.5017 5.6997-5.7105l-4.3317-5.2437c0.67695-1.2001 1.2177-2.4878 1.5959-3.8432l6.7744-0.64056c0.22456-1.3148 0.34741-2.6598 0.34741-4.0386 0-1.3765-0.12361-2.726-0.34741-4.0386l-6.7744-0.64053c-0.37825-1.3554-0.91896-2.6431-1.5959-3.8432l4.3426-5.2437c-1.568-2.2146-3.507-4.1422-5.722-5.7101l-5.2437 4.3317c-1.2015-0.67776-2.486-1.2067-3.8432-1.585l-0.641-6.7853c-1.3123-0.22366-2.6518-0.34741-4.0278-0.34741zm0 14.776c5.0178 0 9.076 4.0691 9.076 9.0869s-4.0582 9.0869-9.076 9.0869-9.0869-4.0691-9.0869-9.0869 4.0691-9.0869 9.0869-9.0869z"})))}class G extends m.PureComponent{componentDidMount(){this.context.playback.hub.on("seek",()=>this.forceUpdate()),this.context.playback.hub.on("timeupdate",()=>this.forceUpdate())}render(){const{playback:e}=this.context;return m.createElement("span",{className:"rp-controls-time"},m.createElement("span",{className:"rp-current-time"},w(e.currentTime)),m.createElement("span",{className:"rp-time-separator"},"/"),m.createElement("span",{className:"rp-total-time"},w(e.duration)))}}G.contextType=j;class W extends m.Component{constructor(e,t){super(e,t),this.player=t,f(this,["onInput"])}componentDidMount(){this.player.playback.hub.on("volumechange",()=>this.forceUpdate())}onInput(e){this.player.playback.volume=parseFloat(e.target.value)/100}render(){const{playback:e}=this.player;return m.createElement("div",{className:"rp-controls-volume"},m.createElement("svg",{onClick:()=>e.muted=!e.muted,viewBox:"0 0 100 100"},m.createElement("path",{d:"M 10 35 h 20 l 25 -20 v 65 l -25 -20 h -20 z",fill:"white",stroke:"none"}),e.muted?m.createElement("path",{d:"M 63 55 l 20 20 m 0 -20 l -20 20",stroke:"white",strokeWidth:"7"}):m.createElement("g",null,e.volume>0&&m.createElement("path",{d:"M 62 32.5 a 1,1 0 0,1 0,30",fill:"white",stroke:"none"}),e.volume>=.5&&m.createElement("path",{d:"M 62 15 a 1,1 0 0,1 0,65 v -10 a 10,10 0 0,0 0,-45 v -10 z",fill:"white",stroke:"none"}))),m.createElement("input",{min:"0",max:"100",onChange:this.onInput,onInput:this.onInput,type:"range",value:e.muted?0:100*e.volume}))}}W.contextType=j;const Z=1e3;class J extends m.PureComponent{constructor(e,t){super(e,t),this.player=t,this.captureKeys=!0,f(this,["forceUpdate","onKeyDown","resetTimer"]),this.state={visible:!0}}canvasClick(){const{playback:e}=this.player;this.player.applyHooks("canvasClick").every(e=>e)&&(e.paused?e.play():e.pause()),this.player.hub.emit("canvasClick")}componentDidMount(){const{playback:e}=this.player;document.body.addEventListener("keydown",this.onKeyDown),document.body.addEventListener("touchstart",this.resetTimer),document.body.addEventListener("mousemove",this.resetTimer),e.hub.on("play",this.resetTimer),e.hub.on("pause",()=>{clearTimeout(this.timer),this.setState({visible:!0})}),e.hub.on("stop",()=>{clearTimeout(this.timer),this.setState({visible:!0})}),document.body.addEventListener("mouseleave",()=>{this.player.playback.paused||this.setState({visible:!1})})}onKeyDown(e){if(!this.captureKeys)return;if(e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault(),this.resetTimer();const{playback:t,script:n}=this.player;switch(e.key.toLowerCase()){case"arrowleft":return void t.seek(t.currentTime-5*Z);case"j":return void t.seek(t.currentTime-10*Z);case"k":case" ":return void t[t.paused?"play":"pause"]();case"arrowright":return void t.seek(t.currentTime+5*Z);case"l":return void t.seek(t.currentTime+10*Z);case"f":return void(P()?M():C());case"<":return void(t.playbackRate=Q[Math.max(0,Q.indexOf(t.playbackRate)-1)]);case">":return void(t.playbackRate=Q[Math.min(Q.length-1,Q.indexOf(t.playbackRate)+1)]);case"arrowup":return void(t.volume=t.volume+.05);case"arrowdown":return void(t.volume=t.volume-.05);case"m":return void(t.muted=!t.muted);case"w":return void n.back();case"e":return void n.forward();case"?":return void this.$helpControl.toggleDialog();case"escape":return void this.$helpControl.closeDialog()}const r=parseInt(e.key,10);isNaN(r)||t.seek(t.duration*r/10)}resetTimer(){this.player.playback.paused||(void 0!==this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.setState({visible:!1})},3e3),this.setState({visible:!0}))}render(){const e=["rp-controls"];return this.state.visible||e.push("hidden"),m.createElement("div",{className:e.join(" ")},m.createElement(Y,{thumbs:this.props.thumbs}),m.createElement("div",{className:"rp-controls-buttons"},m.createElement(V,null),m.createElement(W,null),m.createElement(G,null),m.createElement("div",{className:"rp-controls-float-right"},this.player.applyHooks("controls"),m.createElement(q,null),m.createElement($,{ref:e=>this.$helpControl=e}),m.createElement(B,null))))}}J.contextType=j;class ee extends m.PureComponent{componentDidMount(){const{playback:e}=this.context;e.hub.on("cuechange",()=>{this.domElement.innerHTML="";for(const t of e.captions)this.domElement.appendChild(t)})}render(){return m.createElement("div",{className:"rp-captions-display",ref:e=>this.domElement=e})}}ee.contextType=j;const te=Symbol();class ne extends m.PureComponent{constructor(e){super(e),this.hub=new O.EventEmitter,this.__canPlayTasks=[],this.__canPlayThroughTasks=[],this.script=this.props.script,this.playback=this.script.playback,this.rememberVolumeSettings(),this.buffers=new Map,this.hooks=new Map;const t=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,[]),this.hooks.get(e).push(t)};this.props.plugins.forEach(e=>e.setup(t)),this.state={ready:!1},f(this,["onMouseUp","suspendKeyCapture","resumeKeyCapture"])}componentDidMount(){document.addEventListener("touchmove",e=>e.preventDefault(),{passive:!1}),document.addEventListener("touchforcechange",e=>e.preventDefault(),{passive:!1}),Promise.all(this.__canPlayTasks).then(()=>this.hub.emit("canplay")),Promise.all(this.__canPlayThroughTasks).then(()=>this.hub.emit("canplaythrough"))}rememberVolumeSettings(){const{playback:e}=this,t=window.sessionStorage;e.volume=parseFloat(t.getItem("ractive volume")||"1"),e.muted="true"===(t.getItem("ractive muted")||"false"),e.hub.on("volumechange",()=>{t.setItem("ractive muted",e.muted.toString()),t.setItem("ractive volume",e.volume.toString())})}updateTree(){const{script:e}=this;!function t(n){if(void 0!==n.first){if(n.first<=e.markerIndex&&(!n.last||e.markerIndex<n.last))return n.element.style.removeProperty("opacity"),n.element.style.removeProperty("pointer-events"),n.children.forEach(t);n.element.style.opacity="0",n.element.style["pointer-events"]="none"}else{if(void 0===n.during)return n.children.forEach(t);if(e.markerName.startsWith(n.during))return n.element.style.removeProperty("opacity"),n.element.style.removeProperty("pointer-events"),n.children.forEach(t);n.element.style.opacity="0",n.element.style["pointer-events"]="none"}}(this.dag)}onMouseUp(e){e[te]||this.$controls.canvasClick()}static preventCanvasClick(e){e.persist(),e[te]=!0}suspendKeyCapture(){this.$controls.captureKeys=!1}resumeKeyCapture(){this.$controls.captureKeys=!0}ready(){this.dag=function(e,t){const n=Array.from(e.querySelectorAll("*[data-from-first], *[data-during]")),r={children:[],element:e},s=[r];for(const o of n){let e,n,r;o.dataset.fromFirst?(e=o.dataset.fromFirst,n=o.dataset.fromLast):o.dataset.during&&(r=o.dataset.during),o.style.opacity="0",o.style.pointerEvents="none";const i={children:[],element:o};r&&(i.during=r),e&&(i.first=t(e)),n&&(i.last=t(n));let a=s[s.length-1];for(;!a.element.contains(o);)s.pop(),a=s[s.length-1];a.children.push(i),s.push(i)}return r}(this.canvas,this.script.markerNumberOf),this.script.hub.on("markerupdate",()=>this.updateTree()),this.updateTree(),this.setState({ready:!0})}registerBuffer(e){this.buffers.set(e,[])}updateBuffer(e,t){this.buffers.set(e,t),this.playback.hub.emit("bufferupdate")}obstruct(e,t){"canplay"===e?this.__canPlayTasks.push(t):this.__canPlayThroughTasks.push(t)}applyHooks(e){return this.hooks.has(e)?this.hooks.get(e).map(e=>e()):[]}render(){const e={style:this.props.style},t=D?{onMouseUp:this.onMouseUp}:{},n=["ractive-player"];return this.state.ready||n.push("not-ready"),n.push(...this.applyHooks("classNames")),m.createElement(ne.Context.Provider,{value:this},m.createElement("div",Object.assign({className:n.join(" ")},e),m.createElement(re,null),m.createElement("div",Object.assign({className:"rp-canvas"},t,{ref:e=>this.canvas=e}),this.props.children),m.createElement(ee,{player:this}),m.createElement(J,{player:this,ref:e=>this.$controls=e,ready:this.state.ready,thumbs:this.props.thumbs})))}}function re(){return m.createElement("div",{className:"rp-loading-screen"},m.createElement("div",{className:"rp-loading-spinner"}))}ne.Context=j,ne.defaultProps={plugins:[],style:{}},ne.CONTROLS_HEIGHT=44;class se extends m.PureComponent{constructor(e,t){super(e,t),this.player=t,"string"==typeof this.props.start?this.props.start.match(/^(?:(?:(\d+):)?(\d+):)?(\d+)(?:\.(\d+))?$/)?this.start=k(this.props.start):this.start=this.player.script.markerByName(this.props.start)[1]:this.start=this.props.start,f(this,["onPause","onPlay","onRateChange","onSeek","onSeeking","onTimeUpdate","onVolumeChange"])}componentDidMount(){const{playback:e}=this.player;e.hub.on("pause",this.onPause),e.hub.on("play",this.onPlay),e.hub.on("ratechange",this.onRateChange),e.hub.on("seek",this.onSeek),e.hub.on("seeked",this.onSeek),e.hub.on("seeking",this.onSeeking),e.hub.on("timeupdate",this.onTimeUpdate),e.hub.on("volumechange",this.onVolumeChange),this.props.obstructCanPlay&&this.player.obstruct("canplay",p(this.domElement)),this.props.obstructCanPlayThrough&&this.player.obstruct("canplaythrough",d(this.domElement)),this.onVolumeChange();const t=()=>{const e=this.domElement.buffered,t=[];for(let n=0;n<e.length;++n)e.end(n)!==1/0&&t.push([1e3*e.start(n)+this.start,1e3*e.end(n)+this.start]);return t},n=()=>{this.player.updateBuffer(this.domElement,t())};this.player.registerBuffer(this.domElement),n(),this.domElement.addEventListener("progress",n)}get end(){return this.start+1e3*this.domElement.duration}onPlay(){this.onTimeUpdate(this.player.playback.currentTime)}onPause(){this.domElement.pause()}onRateChange(){this.domElement.playbackRate=this.player.playback.playbackRate}onSeeking(){this.domElement.pause()}onSeek(e){const{playback:t}=this.player;E(this.start,e,this.end)?(this.domElement.currentTime=(e-this.start)/1e3,!this.domElement.paused||t.paused||t.seeking||this.domElement.play().catch(this.player.playback.pause)):this.domElement.paused||this.domElement.pause()}onTimeUpdate(e){if(E(this.start,e,this.end)){if(!this.domElement.paused)return;this.domElement.currentTime=(e-this.start)/1e3,this.domElement.play().catch(this.player.playback.pause)}else this.domElement.paused||this.domElement.pause()}onVolumeChange(){const{playback:e}=this.player;this.domElement.volume=e.volume,this.domElement.muted=e.muted}}function oe(e){const t=document.createElement("template");return t.innerHTML=e,t.content.cloneNode(!0)}se.defaultProps={obstructCanPlay:!1,obstructCanPlayThrough:!1},se.contextType=ne.Context;var ie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class ae extends se{componentDidMount(){super.componentDidMount();const{playback:e}=this.player;for(const t of Array.from(this.domElement.textTracks))t.addEventListener("cuechange",()=>{const n=[];for(const e of Array.from(t.activeCues)){const t=e.text.replace(/\n/g,"<br/>");n.push(oe(t))}e.captions=n})}render(){const e=this.props,{start:t,obstructCanPlay:n,obstructCanPlayThrough:r,children:s}=e,o=ie(e,["start","obstructCanPlay","obstructCanPlayThrough","children"]);return m.createElement("audio",Object.assign({preload:"auto",ref:e=>this.domElement=e},o),s)}}function ce(e){"startValue"in e||(e.startValue=0),"endValue"in e||(e.endValue=1),"easing"in e||(e.easing=e=>e);const{startValue:t,endValue:n,startTime:r,duration:s,easing:o}=e;return e=>t+o(g(0,(e-r)/s,1))*(n-t)}function le({data:e,start:t,end:n,active:r,inactive:s,compressed:o}){void 0===o&&(o=!1);const i=e.map(e=>e[0]);if(o)for(let u=1;u<i.length;++u)i[u]+=i[u-1];void 0===t&&(t=0),void 0===n&&(n=t+i[i.length-1]);let a=0,c=0,l=!0;return function(o){if(o<t||o>=n)return l?(l=!1,s()):void 0;l=!0,o<a&&(c=0),a=o;let u=Math.min(c,i.length-1);for(;c<i.length&&t+i[c]<o;c++)u=c;const[,h]=e[u];r(h,u)}}const ue={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};class he extends m.PureComponent{constructor(e,t){super(e,t),this.player=t;const{script:n}=this.player;this.start="number"==typeof e.start?e.start:n.markerByName(e.start)[1],this.end="number"==typeof e.end?e.end:n.markerByName(e.end)[1]}componentDidMount(){const{playback:e}=this.player,{display:t}=this.domElement.style;this.domElement.style.display="block";const{height:n,width:r}=this.domElement.getBoundingClientRect();this.domElement.style.display=t;const s=le({data:this.props.replay,start:this.start,end:this.end,active:([e,t])=>{Object.assign(this.domElement.style,{display:"block",left:`calc(${e}% - ${r/2}px)`,top:`calc(${t}% - ${n/2}px)`})},inactive:()=>{this.domElement.style.display="none"},compressed:!0});e.hub.on("seek",()=>s(e.currentTime)),e.hub.on("timeupdate",s),s(e.currentTime)}render(){const{playback:e}=this.player,t={display:E(this.start,e.currentTime,this.end)?"block":"none"};return m.createElement("img",{className:"rp-cursor",ref:e=>{this.domElement=e},src:this.props.src,style:t})}}function me(e,t){return m.Children.map(e,e=>m.isValidElement(e)?("children"in e.props&&(e=m.cloneElement(e,{children:me(e.props.children,t)})),t(e)):e)}he.contextType=ne.Context;class pe extends m.PureComponent{constructor(e){super(e),f(this,["renderContent"]),this.foundIds=new Set}render(){return this.props.hasOwnProperty("map")?m.createElement(pe.Context.Provider,{value:[this.foundIds,this.props.map]},this.renderContent([this.foundIds,this.props.map])):m.createElement(pe.Context.Consumer,null,this.renderContent)}renderContent([e,t]){return me(this.props.children,n=>{const r={};if(n.props.hasOwnProperty("id")){const{id:s}=n.props;e.add(s),void 0!==t[s]&&Object.assign(r,t[s])}return 0===Object.keys(r).length?n:m.cloneElement(n,r)})}}pe.Context=m.createContext([]);class de{constructor(e){Object.assign(this,{currentTime:0,hub:new O.EventEmitter,duration:e.duration,playbackRate:1,playingFrom:0,startTime:performance.now(),__captions:[],__muted:!1,__playbackRate:1,paused:!0,__seeking:!1,__volume:1,__canPlayTasks:[],__canPlayThroughTasks:[]}),this.audioContext=new(window.AudioContext||webkitAudioContext),this.audioNode=this.audioContext.createGain(),this.audioNode.connect(this.audioContext.destination),this.hub.setMaxListeners(0),f(this,["pause","play","__advance"]),requestAnimationFrame(this.__advance)}get captions(){return this.__captions}set captions(e){this.__captions=e,this.hub.emit("cuechange")}get muted(){return this.__muted}set muted(e){e!==this.__muted&&(this.__muted=e,this.__muted?this.audioNode.gain.value=0:this.audioNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.hub.emit("volumechange"))}get playbackRate(){return this.__playbackRate}set playbackRate(e){e!==this.__playbackRate&&(this.__playbackRate=e,this.playingFrom=this.currentTime,this.startTime=performance.now(),this.hub.emit("ratechange"))}get seeking(){return this.__seeking}set seeking(e){e!==this.__seeking&&(this.__seeking=e,this.__seeking?this.hub.emit("seeking"):this.hub.emit("seeked"))}pause(){this.paused=!0,this.playingFrom=this.currentTime,this.hub.emit("pause")}play(){this.paused=!1,this.hub.emit("play")}seek(e){"string"==typeof e&&(e=k(e)),e=g(0,e,this.duration),this.currentTime=this.playingFrom=e,this.startTime=performance.now(),this.hub.emit("seek",e)}get volume(){return this.__volume}set volume(e){this.muted=!1,this.__volume=g(0,e,1),0===this.__volume?this.audioNode.gain.setValueAtTime(0,this.audioContext.currentTime):this.audioNode.gain.exponentialRampToValueAtTime(this.__volume,this.audioContext.currentTime+2),this.hub.emit("volumechange")}stop(){this.paused=!0,this.playingFrom=0,this.hub.emit("stop")}__advance(e){this.paused||this.__seeking?this.startTime=e:(this.currentTime=this.playingFrom+Math.max((e-this.startTime)*this.__playbackRate,0),this.currentTime>=this.duration&&(this.currentTime=this.duration,this.stop()),this.hub.emit("timeupdate",this.currentTime)),requestAnimationFrame(this.__advance)}}class fe{constructor(e){this.hub=new O.EventEmitter,this.hub.setMaxListeners(0),f(this,["markerByName","markerNumberOf","__updateMarker"]);let t=0;for(const n of e){if(2===n.length){const[,e]=n;n[1]=t,n[2]=t+k(e)}else{const[,e,t]=n;n[1]=k(e),n[2]=k(t)}t=n[2]}this.markers=e,this.markerIndex=0,this.playback=new de({duration:this.markers[this.markers.length-1][2]}),this.playback.hub.on("seek",this.__updateMarker),this.playback.hub.on("timeupdate",this.__updateMarker)}get markerName(){return this.markers[this.markerIndex][0]}back(){this.playback.seek(this.markers[Math.max(0,this.markerIndex-1)][1])}forward(){this.playback.seek(this.markers[Math.min(this.markers.length-1,this.markerIndex+1)][1])}markerByName(e){return this.markers[this.markerNumberOf(e)]}markerNumberOf(e){for(let t=0;t<this.markers.length;++t)if(this.markers[t][0]===e)return t;throw new Error(`Marker ${e} does not exist`)}__updateMarker(e){let t;for(let n=0;n<this.markers.length;++n){const[,r,s]=this.markers[n];if(E(r,e,s)){t=n;break}}if(void 0===t&&(t=this.markers.length-1),t!==this.markerIndex){const e=this.markerIndex;this.markerIndex=t,this.hub.emit("markerupdate",e)}}}function ye(e){return e?{}:{style:{opacity:0,pointerEvents:"none"}}}function ve(e){return{"data-during":e}}function be(e,t){return{"data-from-first":e,"data-from-last":t}}var ge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class Ee extends se{onSeek(e){const t=this.domElement.paused;super.onSeek(e),this.domElement.paused!==t&&(this.domElement.paused?this.domElement.style.display="none":this.domElement.style.display="block")}onTimeUpdate(e){const t=this.domElement.paused;super.onTimeUpdate(e),this.domElement.paused!==t&&(this.domElement.paused?this.domElement.style.display="none":this.domElement.style.display="block")}render(){const{playback:e}=this.context,t=this.props,{start:n,children:r,obstructCanPlay:s,obstructCanPlayThrough:o}=t,i=ge(t,["start","children","obstructCanPlay","obstructCanPlayThrough"]);return i.style=Object.assign(Object.assign({},i.style||{}),{display:this.domElement&&E(this.start,e.currentTime,this.end)?"block":"none"}),m.createElement("video",Object.assign({preload:"auto",ref:e=>this.domElement=e},i),r)}}n.d(t,"Audio",function(){return ae}),n.d(t,"Cursor",function(){return he}),n.d(t,"IdMap",function(){return pe}),n.d(t,"Playback",function(){return de}),n.d(t,"Player",function(){return ne}),n.d(t,"Script",function(){return fe}),n.d(t,"Utils",function(){return h}),n.d(t,"Video",function(){return Ee})}]);